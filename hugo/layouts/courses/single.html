{{ define "main" }}
{{ $free := .Params.free }}

<article itemscope itemtype="http://schema.org/Article" >
    <header>
        <h1 itemprop="name" id="{{ anchorize .Title }}" class="post-title border-bottom">
            {{ .Title }}

        {{ with .Params.weight }}
            <span class="sub-heading">Step {{ . }}</span>
        {{ end }}
        </h1>



        {{ with .Params.video }}
        

        {{ if $free }}
            <allow-if level="user">

                <video-player src="{{ . }}" require-login="true"></video-player>
                
                <span slot="falsey">{{ partial "video-login.html" }}</span>

            </allow-if>
        {{ else }}
            <allow-if level="pro">


                <video-player src="{{ . }}" require-login="true"></video-player>

                <allow-if slot="falsey" level="user">

                    <div class="box box-orange">
                        <div class="box-icon">{{ partial "svg/hazard.svg" }}</div>
                        <div class="box-content">
                            This lesson is only available for PRO members. Sign-in and choose a plan below.
                        </div>
                    </div>

                    {{ partial "pricing" }}

                    <span slot="falsey">
                            {{ partial "video-login.html" }}
                    </span>

                </allow-if>
            </allow-if>

        {{ end }}


        {{ end }}

    </header>
    {{ partial "chapters-next.html" . }}

  <div class="content-main">

    



    <section class="content-article no-toc" itemprop="articleBody">{{ .Content }}</section>
  </div>

  {{ $chapters := .Parent.Pages.ByWeight }} 
  {{ partial "chapters.html" (dict "chapters" $chapters "active" .RelPermalink) }}
</article>

    {{ partial "qna.html" . }}


{{ end }}
